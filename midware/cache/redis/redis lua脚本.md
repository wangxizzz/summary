# 概念&语法：
参考：https://cloud.tencent.com/developer/article/1366672

# 注意
- lua的原子性与数据库事务的原子性概念不一样：
    - db事务的原子性：如果有任一任务执行失败，则整个工作单元或事务就会被终止。即此前对数据所作的任何修改都将被撤销。如果所有任务都被成功执行，事务就会被提交，即对数据所作的修改将会是永久性的。
    - lua的原子性：在 lua 脚本执行的过程中遇到了错误，同 redis 的事务一样，```那些通过 redis.call 函数已经执行过的指令对服务器状态产生影响是无法撤销的```，在编写 lua 代码时一定要小心，避免没有考虑到的判断条件导致脚本没有完全执行。
        - 可以使用例子验证无法撤销之前的操作：eval 'redis.call("del",KEYS[1]);return redis.call("incr", "foo1")' 1 foo bar 